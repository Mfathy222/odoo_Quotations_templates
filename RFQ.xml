<!-- ================================== RFQ body ================================================= -->
<t t-name="sale.report_saleorder_document_copy_2">
    <t t-call="web.external_layout">
        <!-- ============ همهم جدا ============ -->
        <t t-set="o" t-value="doc"/>
        <!-- ============ همهم جدا ============ -->
        <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)"/>
        <t t-set="forced_vat" t-value="doc.fiscal_position_id.foreign_vat"/>
        <t t-set="address">
            <div t-field="doc.partner_id" class="mb-0" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"/>
            <p t-if="doc.partner_id.vat" class="mb-0">
                <t t-if="doc.company_id.account_fiscal_country_id.vat_label" t-out="doc.company_id.account_fiscal_country_id.vat_label"/>
                <t t-else="">Tax ID</t>: 
                <span t-field="doc.partner_id.vat"/>
            </p>
        </t>
        <t t-if="doc.partner_shipping_id == doc.partner_invoice_id and doc.partner_invoice_id != doc.partner_id or doc.partner_shipping_id != doc.partner_invoice_id">
            <t t-set="information_block">
                <strong>
                    <t t-if="doc.partner_shipping_id == doc.partner_invoice_id">
                        Invoicing and Shipping Address
                    </t>
                    <t t-else="">
                        Invoicing Address
                    </t>
                </strong>
                <div t-field="doc.partner_invoice_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;, &quot;phone&quot;], &quot;no_marker&quot;: True, &quot;phone_icons&quot;: True}"/>
                <t t-if="doc.partner_shipping_id != doc.partner_invoice_id">
                    <strong class="d-block mt-3">Shipping Address</strong>
                    <div t-field="doc.partner_shipping_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;, &quot;phone&quot;], &quot;no_marker&quot;: True, &quot;phone_icons&quot;: True}"/>
                </t>
            </t>
        </t>
        <!-- ============ add->class="page d-flex flex-column"->here ============ -->
        <div class="page d-flex flex-column" style=" padding-top:60px !important;">
            <div class="flex-grow-1">
                <!--<div class="oe_structure"/>-->
                <t t-set="is_proforma" t-value="env.context.get('proforma', False) or is_pro_forma"/>
                <t t-set="layout_document_title">
                    <span t-if="is_proforma">Pro-Forma Invoice # </span>
                    <span t-elif="doc.state in ['draft','sent']">Quotation # </span>
                    <span t-else="">Order # </span>
                    <span t-field="doc.name">SO0000</span>
                </t>
                <div class="row mb-4" id="informations">
                    <div t-if="doc.client_order_ref" class="col" name="informations_reference">
                        <strong>Your Reference</strong>
                        <div t-field="doc.client_order_ref">SO0000</div>
                    </div>
                    <div t-if="doc.validity_date and doc.state in ['draft', 'sent']" class="col" name="expiration_date"/>
            <div class="col" t-if="doc.incoterm">
                <strong>Incoterm</strong>
                <div t-if="doc.incoterm_location">
                    <span t-field="doc.incoterm.code"/> <br/>
                    <span t-field="doc.incoterm_location"/>
                </div>
                <div t-else="" t-field="doc.incoterm.code"/>
            </div>
                    <div t-if="doc.commitment_date" class="col" name="delivery_date">
                        <strong>Delivery Date</strong>
                        <div t-field="doc.commitment_date" t-options="{'widget': 'date'}">
                        2023-12-31
                    </div>
                    </div>
                    <div t-if="doc.user_id.name" class="col"/></div>
                    
                     <style>
            .items-table {
                width: 100%;
                border-collapse: collapse;
                font-size: 14px;
                border: 2px solid #180501;
                border-radius: 10px;
                
                
            }
            .items-table th, .items-table td {
                border: 1px solid #180501 !important;
                padding: 4px;
                text-align: center;
                vertical-align: middle;
            }
            .items-col-desc { width: 50%; text-align: left; }
            <!--.items-col-qty { width: 15%; }-->
            .items-col-image { width: 35%; }
            .items-img-cell img { max-height:70px; max-width:130px; }
        </style>

        <table class="items-table">
            <thead style="background-color:#B3AEA6; color:#C82909;">
                <tr>
                    <th style="width:5px !important;">#</th>
                    <th class="items-col-desc">الوصف / Description</th>
                    <th class="items-col-qty">الكمية / QTY</th>
                    
                </tr>
            </thead>
            <tbody>
                <t t-set="row_number" t-value="0"/>
                <t t-foreach="doc.order_line.sorted(lambda l: l.id)" t-as="line">
                    <t t-if="not line.display_type and not line.is_downpayment">
                        <t t-set="row_number" t-value="row_number + 1"/>
                        <tr>
                            <td style="width:5px !important;">
                                <span style="width:5px !important;" t-esc="row_number"/>
                            </td>
                            <td>
                                <div t-esc="line.product_id.display_name"/>
                            </td>
                            <td><span t-field="line.product_uom_qty"/></td>
                       
                        </tr>
                    </t>
                </t>
            </tbody>
        </table>

 
                <!-- Is there a discount on at least one line? -->
                <t t-set="lines_to_report" t-value="doc._get_order_lines_to_report()"/>
                <t t-set="display_discount" t-value="any(l.discount for l in lines_to_report)"/>
                <!-- Hide taxes AND show taxed amounts on lines -->
                <t t-set="hide_taxes_details" t-value="False"/>
                <t t-set="display_taxes" t-value="not hide_taxes_details and any(l._has_taxes() for l in lines_to_report)"/>
                <!-- ================================================================= -->
                <!--                PRODUCTS & TOTALS (CONDITIONAL LAYOUT)             -->
                <!-- ================================================================= -->
                <div class="oe_structure pt-3"/>
                <!-- نحسب الإجماليات مرة واحدة (تستخدم في النوعين) -->
                <t t-set="total_excl" t-value="doc.amount_untaxed"/>
                <t t-set="tax_amount" t-value="doc.amount_tax"/>
                <t t-set="total_incl" t-value="doc.amount_total"/>
                <t t-set="advanced" t-value="0.0"/>
                <t t-set="total_due" t-value="doc.amount_total"/>

                <div class="oe_structure"/>
                <!-- ============ end-body ============ -->
                <!-- Is there a discount on at least one line? -->
                <t t-set="lines_to_report" t-value="doc._get_order_lines_to_report()"/>
                <t t-set="display_discount" t-value="any(l.discount for l in lines_to_report)"/>
                <!-- Hide taxes AND show taxed amounts on lines -->
                <t t-set="hide_taxes_details" t-value="False"/>
                <t t-set="display_taxes" t-value="not hide_taxes_details and any(l._has_taxes() for l in lines_to_report)"/>
                <div class="oe_structure"/>
                <div class="oe_structure"/>
                <div t-if="not doc.signature" class="oe_structure"/>
                <div t-else="" class="mt-4 ml64 mr4" name="signature">
                    <div class="offset-8">
                        <strong>Signature</strong>
                    </div>
                    <div class="offset-8">
                        <img t-att-src="image_data_uri(doc.signature)" style="max-height: 4cm; max-width: 8cm;"/>
                    </div>
                    <div class="offset-8 text-center">
                        <span t-field="doc.signed_by">Oscar Morgan</span>
                    </div>
                </div>
                 <!--============ payment_term ============ -->
                <!--<div>-->
                <!--    <span t-field="doc.note" t-attf-style="#{'text-align:justify;text-justify:inter-word;' if doc.company_id.terms_type != 'html' else ''}" name="order_note"/>-->
                <!--    <p t-if="not is_html_empty(doc.payment_term_id.note)">-->
                <!--        <span t-field="doc.payment_term_id.note">The payment should also be transmitted with love</span>-->
                <!--    </p>-->
                <!--    <div class="oe_structure"/>-->
                <!--    <p t-if="doc.fiscal_position_id and not is_html_empty(doc.fiscal_position_id.sudo().note)" id="fiscal_position_remark">-->
                <!--        <strong>Fiscal Position Remark:</strong>-->
                <!--        <span t-field="doc.fiscal_position_id.sudo().note">No further requirements for this payment</span>-->
                <!--    </p>-->
                <!--</div>-->
                <div class="oe_structure"/>
                <t t-set="base_address" t-value="doc.env['ir.config_parameter'].sudo().get_param('web.base.url')"/>
                <t t-set="portal_url" t-value="base_address + '/my/orders/' + str(doc.id) + '#portal_connect_software_modal_btn'"/>
                <div t-if="any(u._is_portal() for u in doc.partner_id.user_ids) and doc._get_edi_builders()" class="text-center">
                    <a t-att-href="portal_url">Connect your software</a> with 
                    <t t-out="doc.company_id.name"/> to create quotes automatically.
                </div>
            </div>

        </div>
        <br/>
        

    </t>
    
</t>